{"mappings":"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","sources":["src/js/favorites.js","src/js/handleFavorites.js","src/js/createMarkupFunctions/createEmptyFavorites.js","src/js/handleAuthForm.js"],"sourcesContent":["import createSneakersMarkup from './createMarkupFunctions/createSneakersMarkup';\nimport { setFavoritesOnload } from './handleFavorites';\nimport { createEmptyFavorites } from './createMarkupFunctions/createEmptyFavorites';\nimport { setActualPriceIntoHeader } from './calculateTotalPrice';\nimport { setInCartOnload } from './handleCart';\nimport { getSneakerById } from '../api/api';\nimport { themeSwitch, setThemeOnLoad } from './themeSwitch';\nimport { modalHandler } from './displayCart';\nimport './mobileMenu';\nimport { openModal } from './handleAuthForm';\nimport { db, signOut } from '../firebase';\nimport 'firebase/compat/firestore';\n// import { handleCart } from './handleCart';\n\nconst headerGroup = document.querySelector('.header__user__icons__group');\nconst btnLogOut = document.querySelector('.btn__log__out');\n\ndb.auth().onAuthStateChanged(user => {\n  if (user) {\n    console.log(' USER =>', user);\n    console.log('promise');\n\n    setTimeout(() => {\n      setInCartOnload();\n      setFavoritesOnload();\n    }, 2000);\n    setActualPriceIntoHeader();\n\n    console.log(' USER =>', user);\n    document.querySelector('.header__user__user__name').textContent = user.displayName;\n    headerGroup.classList.add('visible');\n    btnLogOut.classList.add('visible');\n\n    console.log(user.displayName);\n  } else {\n    headerGroup.classList.remove('visible');\n    btnLogOut.classList.remove('visible');\n  }\n});\n\nsetThemeOnLoad();\ndocument.querySelector('.theme__switch').addEventListener('change', themeSwitch);\ndocument.addEventListener('click', modalHandler);\n\nbtnLogOut.addEventListener('click', () => {\n  signOut().then(() => {\n    db.auth().onAuthStateChanged(user => {\n      if (!user) {\n        window.location.href = 'index.html';\n      }\n    });\n  });\n});\nconst userButton = document.querySelector('.header__user__icon__user');\nuserButton.addEventListener('click', openModal);\n\nconst list = document.querySelector('.favoritesList__list');\nlist.addEventListener('click', handleFavorites);\nlist.addEventListener('click', handleCart);\n\nfunction handleAuthStateChanged(user) {\n  if (user) {\n    console.log('USER =>', user);\n    console.log('db.auth().currentUser.uid', db.auth().currentUser.uid);\n    db\n      .firestore()\n      .collection('favorites')\n      .where('userId', '==', db.auth().currentUser.uid)\n      .onSnapshot(\n        snapshot => {\n          const favorites = snapshot.docs.map(doc => doc.data()) || [];\n          console.log(favorites);\n          if (favorites.length === 0) {\n            emptyFavorites();\n          } else {\n            list.insertAdjacentHTML('afterbegin', createSneakersMarkup(favorites));\n            setFavoritesOnload();\n            setInCartOnload();\n          }\n        },\n        error => {\n          console.log('–ü–æ–º–∏–ª–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö:', error);\n        },\n      );\n  }\n}\ndb.auth().onAuthStateChanged(handleAuthStateChanged);\n\nsetActualPriceIntoHeader();\n\nfunction emptyFavorites() {\n  const favoritesList = document.querySelector('.favoritesList__list');\n  favoritesList.innerHTML = createEmptyFavorites();\n}\n\nasync function handleFavorites(event) {\n  const heart = event.target;\n\n  if (heart.classList.contains('sneaker__heart__button')) {\n    const sneaker = heart.closest('li');\n\n    if (heart.classList.contains('active')) {\n\n      heart.classList.remove('active');\n      const docId = await db.firestore().collection('favorites').get();\n      docId.forEach(async item => {\n        const currentSneaker = item.data();\n        if (currentSneaker.id === sneaker.id) {\n          await db.firestore().collection('favorites').doc(item.id).delete();\n        }\n      });\n      sneaker.remove();\n      list.innerHTML = '';\n    }\n  }\n\n  db.firestore()\n    .collection('favorites')\n    .get()\n    .then(querySnapshot => {\n      if (querySnapshot.empty) {\n        console.log('–ö–æ–ª–µ–∫—Ü—ñ—è –ø–æ—Ä–æ–∂–Ω—è');\n        emptyFavorites();\n      } else {\n        console.log('–ö–æ–ª–µ–∫—Ü—ñ—è –Ω–µ –ø–æ—Ä–æ–∂–Ω—è');\n      }\n    })\n    .catch(error => {\n      console.log('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ –¥–∞–Ω–∏—Ö –∑ –∫–æ–ª–µ–∫—Ü—ñ—ó:', error);\n    });\n}\n\nasync function handleCart(event) {\n  const cart = event.target;\n\n  if (cart.classList.contains('sneaker__add__button')) {\n    const sneakerId = cart.parentNode.parentNode.id;\n    const selectedSneaker = await getSneakerById(sneakerId) || {};\n\n    if (cart.classList.contains('active')) {\n      cart.classList.remove('active');\n      const docId = await db.firestore().collection('cart').get();\n      docId.forEach(async item => {\n        const currentSneaker = item.data();\n        if (currentSneaker.id === selectedSneaker.id) {\n          await db.firestore().collection('cart').doc(item.id).delete();\n        }\n      });\n      setActualPriceIntoHeader();\n      return;\n    }\n    await db.auth().onAuthStateChanged(async user => {\n      if (user) {\n        cart.classList.add('active');\n        await db\n          .firestore()\n          .collection('cart')\n          .add({ ...selectedSneaker, userId: db.auth().currentUser.uid });\n\n        setActualPriceIntoHeader();\n      } else {\n        console.log('—â–æ–± –¥–æ–¥–∞—Ç–∏ —É –∫–æ—Ä–∑–∏–Ω—É - –∑–∞—Ä–µ—î—Å—Ç—Ä—É–π—Å—è');\n      }\n    });\n  }\n}\n","import { getSneakerById } from '../api/api';\nimport { db } from '../firebase';\nimport 'firebase/compat/firestore';\nimport Swal from 'sweetalert2';\n\nexport async function handleFavorites(event) {\n  const heart = event.target;\n  // console.log('heart', heart);\n  if (heart.classList.contains('sneaker__heart__button')) {\n    console.log('heart', heart);\n    await db.auth().onAuthStateChanged(async user => {\n      if (user) {\n        const sneaker = heart.closest('li');\n        const selectedSneaker = (await getSneakerById(sneaker.id)) || {};\n        // const favorites = JSON.parse(localStorage.getItem('favorites')) || [];\n\n        if (heart.classList.contains('active')) {\n          // const updatedFavorites = favorites.filter(({ id }) => id !== sneaker.id);\n          // localStorage.setItem('favorites', JSON.stringify(updatedFavorites));\n          heart.classList.remove('active');\n\n          // work with FIREBASE\n          const docId = await db.firestore().collection('favorites').get();\n          docId.forEach(async item => {\n            const currentSneaker = item.data();\n            if (currentSneaker.id === selectedSneaker.id) {\n              await db.firestore().collection('favorites').doc(item.id).delete();\n            }\n          });\n\n          return;\n        }\n        heart.classList.add('active');\n        // favorites.push(selectedSneaker);\n        // localStorage.setItem('favorites', JSON.stringify(favorites));\n        // add sneakers to FIREBASE\n        await db\n          .firestore()\n          .collection('favorites')\n          .add({ ...selectedSneaker, userId: db.auth().currentUser.uid });\n      } else {\n        console.log('–∑–∞—Ä–µ—î—Å—Ç—Ä—É–π—Å—è');\n        Swal.fire('Please log in');\n      }\n    });\n  }\n}\n\nexport function setFavoritesOnload() {\n  const currentUser = db.auth().currentUser;\n  if (!currentUser) return;\n     \n  db.firestore()\n    .collection('favorites')\n    .where('userId', '==', currentUser.uid)\n    .onSnapshot(\n      snapshot => {\n        const favorites = snapshot.docs.map(doc => doc.data()) || [];\n        document\n          .querySelectorAll('.sneaker__heart__button.active')\n          .forEach(item => item.classList.remove('active'));\n\n        for (const { id } of favorites) {\n          const item = document.getElementById(id);\n          if (!item) {\n            continue;\n          }\n\n          const heartButton = item.querySelector('.sneaker__heart__button');\n\n          heartButton.classList.add('active');\n        }\n      },\n      error => {\n        console.log('–ü–æ–º–∏–ª–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö:', error);\n      },\n    );\n}\n","export function createEmptyFavorites () {\n    return `<div class=\"emptyContentFavorites__wrapper\" >\n    <div class=\"emptyContentFavorites__img\">ü•∫</div>\n    <h3 class=\"emptyContentFavorites__title\">Favorites not found</h3>\n    <p class=\"emptyContentFavorites__text\">You have not added anything to favorites</p>\n    <div class='emptyContentFavorites__container__button'>\n    <a href=\"index.html\" class=\"emptyContentFavorites__button\">Return</a>\n    </div>\n    </div>`\n}\n","import { createUser, signIn, db } from '../firebase';\n\nconst userButton = document.querySelector('.header__user__icon__user');\nconst authModal = document.querySelector('.modal-auth__backdrop');\nconst closeButton = document.querySelector('.close');\nconst authForm = document.querySelector('.auth__form');\nconst userNameForm = document.querySelector('.username__form');\nconst usernameInput = userNameForm.querySelector('input[name=\"name\"]');\nconst actionText = document.querySelector('.action__text');\nconst btnChangeForm = document.querySelector('.btn__change__form');\nconst title = document.querySelector('.form__title');\nlet isRegMode = true;\nconst identificateForm = document.querySelector('[data-action]');\nconst actionValue = identificateForm.dataset.action;\nconst userName = document.querySelector('.header__user__user__name');\nconst btnLogOut = document.querySelector('.btn__log__out');\nconsole.log(actionValue);\n\nexport async function handleSubmit(event) {\n  event.preventDefault();\n\n  const formData = [...authForm.elements].reduce((formData, element) => {\n    if (element.name) {\n      formData[element.name] = element.value;\n    }\n    return formData;\n  }, {});\n\n  if (isRegMode) {\n    await createUser(formData);\n    console.log('rege');\n    await signIn(formData);\n  } else if (!isRegMode) {\n    await signIn(formData);\n    console.log('log_in');\n  }\n  authForm.reset();\n  const curentUser = await db.auth().currentUser;\n  console.log(curentUser);\n  if (curentUser) {\n    console.log(curentUser);\n    userName.textContent = curentUser.displayName;\n  } else {\n    console.log('user not found');\n  }\n  closeModal();\n}\n\nexport function openModal() {\n  console.log('openModal1');\n  const currentUser = db.auth().currentUser;\n\n  if (currentUser) {\n    const currentPath = window.location.pathname;\n    const basePath = currentPath.endsWith('/index.html') ? currentPath.slice(0, -11) : currentPath;\n    \n    const newURL = `${window.location.origin}${basePath}/purchases.html`;\n    const finalURL = newURL.replace('/favorites.html', '');\n    \n    window.location.replace(finalURL);        \n    console.log('window.location');\n    console.log(window.location);\n    return;\n  }\n  authModal.classList.add('open');\n  closeButton.addEventListener('click', closeModal);\n  userButton.removeEventListener('click', openModal);\n  document.body.style.overflow = 'hidden';\n}\n\nexport function closeModal() {\n  authModal.classList.remove('open');\n  closeButton.removeEventListener('click', closeModal);\n  userButton.addEventListener('click', openModal);\n  document.body.style.overflow = 'visible';\n}\n\nfunction changeForm() {\n  if (isRegMode) {\n    btnChangeForm.textContent = 'Registration';\n    userNameForm.classList.add('hiden');\n    btnChangeForm.setAttribute('data-action', 'log_in');\n    title.textContent = 'Log in';\n    actionText.textContent = 'Don`t have account?';\n    usernameInput.removeAttribute('required');\n    authForm.reset();\n    isRegMode = false;\n  } else {\n    btnChangeForm.textContent = 'Log in';\n    btnChangeForm.setAttribute('data-action', 'reg');\n    userNameForm.classList.remove('hiden');\n    title.textContent = 'Registration';\n    actionText.textContent = 'Already have account?';\n    authForm.reset();\n    isRegMode = true;\n  }\n}\n\nuserButton.addEventListener('click', openModal);\nauthForm.addEventListener('submit', handleSubmit);\nbtnChangeForm.addEventListener('click', changeForm);\ndocument.addEventListener('keydown', function (event) {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n});\nauthModal.addEventListener('click', function (event) {\n  if (event.target === authModal) {\n    closeModal();\n  }\n});\n"],"names":[],"version":3,"file":"favorites.517bb04a.js.map"}
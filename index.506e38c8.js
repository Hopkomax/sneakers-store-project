!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},r=t.parcelRequire7084;function a(e){return e.map((({title:e,images:t,price:n,id:o})=>{const r=e.slice(0,23)+"...";return`<li class='sneaker__item' id = "${o}">\n    <div class='sneaker__img__wrapper'>\n    <div class='sneaker__heart__button'>\n</div>\n    <img src="${t[0]}" alt="${e}">\n</div>\n<h4 class='sneaker__title'>${r}</h4>\n<div class='sneaker__price__container'>\n    <div class='sneaker__price__wrapper'>\n        <p class='sneaker__price__label'>Price</p>\n        <p class='sneaker__price'>${n}</p>\n    </div>\n    <div class='sneaker__add__button'>\n        <span class='sneaker__plus__span'></span>\n    </div>\n</div>\n</li>`})).join(" ")}null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},t.parcelRequire7084=r);const i="https://sneakers-store-project.onrender.com",s=async()=>(await fetch(`${i}/sneakers`)).json(),c=async e=>(await fetch(`${i}/sneakers?title_like=${e}`)).json(),l=async e=>(await fetch(`${i}/sneakers/${e}`)).json();var d=r("gTT0W"),u=r("cEKo3");function _(){u.db.firestore().collection("cart").where("userId","==",u.db.auth().currentUser.uid).onSnapshot((e=>{const t=e.docs.map((e=>e.data()))||[];document.querySelectorAll(".sneaker__add__button.active").forEach((e=>e.classList.remove("active")));for(const{id:e}of t){const t=document.getElementById(e);if(!t)continue;t.querySelector(".sneaker__add__button").classList.add("active")}}),(e=>{console.log("Помилка отримання даних:",e)}))}r("19hka");u=r("cEKo3");function v(){const e=JSON.parse(localStorage.getItem("favorites"))||[];for(const{id:t}of e){const e=document.getElementById(t);if(!e)continue;e.querySelector(".sneaker__heart__button").classList.add("active")}}r("19hka");d=r("gTT0W");const m=document.querySelector(".theme__switch");u=r("cEKo3");const f=document.querySelector(".sneakersList__list"),p=document.querySelector(".header__user__icons__group");!function(){const e=localStorage.getItem("theme");document.body.classList.add(e),"dark"===e&&(m.checked=!0)}(),async function(){await u.db.auth().onAuthStateChanged((e=>{e?(_(),v(),(0,d.setActualPriceIntoHeader)(),console.log(" USER =>",e),document.querySelector(".header__user__user__name").textContent=e.displayName,p.classList.add("visible"),console.log(e.displayName)):p.classList.remove("visible")}))}(),function(){const e=document.querySelector(".sneakersList__list"),t=[...new Array(6)].map((()=>'\n  <li class="skeleton__item">\n    <div class="skeleton__img__wrapper"></div>\n    <div class="skeleton__title__wrapper">\n      <div class="skeleton__title__long"></div>\n      <div class="skeleton__title__short"></div>\n    </div>\n    <div class="skeleton__price__container">\n      <div class="skeleton__price__wrapper"></div>\n      <div class="skeleton__add_button"></div>\n    </div>\n  </li>\n  ')).join(" ");e.insertAdjacentHTML("afterbegin",t)}(),setTimeout((()=>{s().then((e=>{f.innerHTML="",f.insertAdjacentHTML("afterbegin",a(e))}))}),2e3),document.querySelector(".sneakersList__list").addEventListener("click",(async function(e){const t=e.target;if(t.classList.contains("sneaker__heart__button")){const e=t.closest("li"),n=await l(e.id)||{},o=JSON.parse(localStorage.getItem("favorites"))||[];if(t.classList.contains("active")){const r=o.filter((({id:t})=>t!==e.id));localStorage.setItem("favorites",JSON.stringify(r)),t.classList.remove("active");return void(await u.db.firestore().collection("favorites").get()).forEach((async e=>{e.data().id===n.id&&await u.db.firestore().collection("favorites").doc(e.id).delete()}))}t.classList.add("active"),o.push(n),localStorage.setItem("favorites",JSON.stringify(o)),await u.db.firestore().collection("favorites").add({...n,userId:u.db.auth().currentUser.uid})}})),document.querySelector(".sneakersList__list").addEventListener("click",(async function(e){const t=e.target;if(console.log(t),t.classList.contains("sneaker__add__button")){const e=t.parentNode.parentNode.id,n=await l(e)||{};if(t.classList.contains("active")){t.classList.remove("active"),console.log(t);return(await u.db.firestore().collection("cart").get()).forEach((async e=>{e.data().id===n.id&&await u.db.firestore().collection("cart").doc(e.id).delete()})),void(0,d.setActualPriceIntoHeader)()}await u.db.auth().onAuthStateChanged((async e=>{e?(t.classList.add("active"),await u.db.firestore().collection("cart").add({...n,userId:u.db.auth().currentUser.uid}),(0,d.setActualPriceIntoHeader)()):console.log("щоб додати у корзину - зареєструйся")})),await u.db.firestore().collection("cart").add({...n,userId:u.db.auth().currentUser.uid}),(0,d.setActualPriceIntoHeader)()}})),document.querySelector(".theme__switch").addEventListener("change",(function(){console.log(m.checked),m.checked?(document.body.classList.add("dark"),localStorage.setItem("theme","dark")):(document.body.classList.remove("dark"),localStorage.setItem("theme","light"))})),document.querySelector(".btn__log__out").addEventListener("click",u.signOut);var y,h={};h=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var g,b={},L={};g="object"==typeof t&&t&&t.Object===Object&&t;var k="object"==typeof self&&self&&self.Object===Object&&self,S=g||k||Function("return this")();b=function(){return L.Date.now()};var w={},q={},E={},C=/\s/;E=function(e){for(var t=e.length;t--&&C.test(e.charAt(t)););return t};var T=/^\s+/;q=function(e){return e?e.slice(0,E(e)+1).replace(T,""):e};var O,I={},j={};O=(L=S).Symbol;var x={},A=Object.prototype,H=A.hasOwnProperty,N=A.toString,$=O?O.toStringTag:void 0;x=function(e){var t=H.call(e,$),n=e[$];try{e[$]=void 0;var o=!0}catch(e){}var r=N.call(e);return o&&(t?e[$]=n:delete e[$]),r};var M={},U=Object.prototype.toString;M=function(e){return U.call(e)};var P="[object Null]",R="[object Undefined]",J=O?O.toStringTag:void 0;j=function(e){return null==e?void 0===e?R:P:J&&J in Object(e)?x(e):M(e)};var D={};D=function(e){return null!=e&&"object"==typeof e};var W="[object Symbol]";I=function(e){return"symbol"==typeof e||D(e)&&j(e)==W};var K=NaN,B=/^[-+]0x[0-9a-f]+$/i,F=/^0b[01]+$/i,V=/^0o[0-7]+$/i,z=parseInt;w=function(e){if("number"==typeof e)return e;if(I(e))return K;if(h(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=h(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=q(e);var n=F.test(e);return n||V.test(e)?z(e.slice(2),n?2:8):B.test(e)?K:+e};var Y="Expected a function",G=Math.max,Q=Math.min;y=function(e,t,n){var o,r,a,i,s,c,l=0,d=!1,u=!1,_=!0;if("function"!=typeof e)throw new TypeError(Y);function v(t){var n=o,a=r;return o=r=void 0,l=t,i=e.apply(a,n)}function m(e){var n=e-c;return void 0===c||n>=t||n<0||u&&e-l>=a}function f(){var e=b();if(m(e))return p(e);s=setTimeout(f,function(e){var n=t-(e-c);return u?Q(n,a-(e-l)):n}(e))}function p(e){return s=void 0,_&&o?v(e):(o=r=void 0,i)}function y(){var e=b(),n=m(e);if(o=arguments,r=this,c=e,n){if(void 0===s)return function(e){return l=e,s=setTimeout(f,t),d?v(e):i}(c);if(u)return clearTimeout(s),s=setTimeout(f,t),v(c)}return void 0===s&&(s=setTimeout(f,t)),i}return t=w(t)||0,h(n)&&(d=!!n.leading,a=(u="maxWait"in n)?G(w(n.maxWait)||0,t):a,_="trailing"in n?!!n.trailing:_),y.cancel=function(){void 0!==s&&clearTimeout(s),l=0,o=c=r=s=void 0},y.flush=function(){return void 0===s?i:p(b())},y};const X=document.querySelector(".sneakersList__list"),Z=document.querySelector(".search__input");const ee=e(y)((async function(e){const t=Z.value.toLowerCase().trim();X.innerHTML="";try{const e=await c(t);0===e.length&&X.insertAdjacentHTML("afterbegin",'<div class="emptyContent__wrapper" >\n    <div class="emptyContent__img">\n    </div>\n    <h3 class="emptyContent__title">No result found</h3>\n    <p class="emptyContent__text">Please, try again with another keyword</p>\n    <div class="emptyContent__container__button">\n    <a href="index.html"  class="emptyContent__button">Return</a>\n  </div>\n    </div>'),X.insertAdjacentHTML("afterbegin",a(e)),v(),_()}catch(e){console.error("Error searching sneakers:",e)}}),500);Z.addEventListener("input",ee);d=r("gTT0W");var te=r("aROVc");function ne(){const e=localStorage.getItem("inCart");let t=localStorage.getItem("purchases");if(t=t?JSON.parse(t):[],e){const n=t.concat(JSON.parse(e));localStorage.setItem("purchases",JSON.stringify(n))}localStorage.removeItem("inCart"),document.querySelector(".cartList__container").innerHTML='\n    <div class="emptyContentOrder__wrapper" >\n    <div class="emptyContentOrder__img"></div>\n    <h3 class="emptyContentOrder__title">Order is processed!</h3>\n    <p class="emptyContentOrder__text">Your order will be delivered to courier soon</p>\n    <div class=\'emptyContentOrder__container__button\'>\n    <a href="index.html" class="emptyContentOrder__button">Return</a>\n    </div>\n    </div>'}function oe(){document.querySelector(".cartList").innerHTML='\n  <div class="cartList__container">\n    <div class="cart__container__top__blok">\n    <h2 class="cartList__title">Cart</h2>\n    <ul class="cartList__list"></ul>\n</div>\n    <div class="cart__container__bottom__blok">\n      <div class="sneaker__inCart__totalAmount">\n        <p>Total</p>\n        <span></span>\n        <p>UAH</p>\n      </div>\n      <div class="sneaker__inCart__taxes">\n        <p>VAT 5%</p>\n        <span></span>\n        <p>UAH</p>\n      </div>\n      <div class="cart__container__button__blok">\n        <button class="cart__container__button">Make order</button>\n      </div>\n    </div>\n  </div>';const e=document.querySelector(".cartList__list"),t=document.querySelector(".cart__container__button");e.addEventListener("click",te.handleDelete),t.addEventListener("click",ne)}var re=r("sLsIj");u=r("cEKo3");r("19hka");let ae=null;const ie=document.querySelector("#modal-backdrop"),se=document.querySelector(".cartList");let ce=null;function le(e){e.classList.remove("active"),ie.classList.add("hidden"),document.body.style.overflow="visible"}document.addEventListener("click",(function(e){e.target.closest(".header__user__icon__cart")&&(oe(),ae=document.querySelector(".cartList__list"),se.classList.add("active"),ie.classList.remove("hidden"),document.body.style.overflow="hidden",(0,d.setActualPriceIntoCart)(),ce=u.db.firestore().collection("cart").where("userId","==",u.db.auth().currentUser.uid).onSnapshot((e=>{const t=e.docs.map((e=>e.data()))||[];if(console.log(t),0===t.length){document.querySelector(".cartList__container").innerHTML=(0,re.default)()}else ae.innerHTML=t.map((({title:e,images:t,price:n,id:o})=>`\n      <li class='sneaker__inCart__item'id=${o}>\n      <img class='sneaker__inCart__img' src="${t[0]}" alt="${e}">\n      <div class='sneaker__inCart__description'>\n          <h3>${e}</h3>\n          <p>${n} UAH</p>\n      </div>\n      <div class='sneaker__inCart__button'>\n          <span class='sneaker__inCart__button-span'>x</span>\n      </div>\n  </li>`)).join(" ")}),(e=>{console.log("Помилка отримання даних:",e)})));e.target.matches("#modal-backdrop")&&(ae.innerHTML="",le(se),(0,d.setActualPriceIntoHeader)(),_())})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&le(se)}));const de=document.querySelector("#navToggle"),ue=(document.querySelector("#navClosed"),document.querySelector("#navOpen")),_e=document.querySelectorAll(".navIcon"),ve=document.querySelector("nav");de.addEventListener("click",(()=>{ve.classList.toggle("open"),document.body.style.overflow=ve.classList.contains("open")?"hidden":"auto",_e.forEach((e=>{e.classList.toggle("hidden")}))})),window.addEventListener("resize",(()=>{document.body.clientWidth>1200&&(ve.classList.remove("open"),_e.forEach((e=>{e.classList.remove("hidden")})),ue.classList.add("hidden"),document.body.style.overflow="auto")}),{passive:!1});u=r("cEKo3");const me=document.querySelector(".header__user__icon__user"),fe=document.querySelector(".modal-auth__backdrop"),pe=document.querySelector(".close"),ye=document.querySelector(".auth__form"),he=document.querySelector(".username__form"),ge=he.querySelector('input[name="name"]'),be=document.querySelector(".action__text"),Le=document.querySelector(".btn__change__form"),ke=document.querySelector(".form__title");let Se=!0;const we=document.querySelector("[data-action]").dataset.action,qe=document.querySelector(".header__user__user__name");function Ee(){console.log("openModal1"),fe.classList.add("open"),pe.addEventListener("click",Ce),me.removeEventListener("click",Ee),document.body.style.overflow="hidden"}function Ce(){fe.classList.remove("open"),pe.removeEventListener("click",Ce),me.addEventListener("click",Ee),document.body.style.overflow="visible"}console.log(we),me.addEventListener("click",Ee),ye.addEventListener("submit",(async function(e){e.preventDefault();const t=[...ye.elements].reduce(((e,t)=>(t.name&&(e[t.name]=t.value),e)),{});Se?(await(0,u.createUser)(t),console.log("rege"),await(0,u.signIn)(t)):Se||(await(0,u.signIn)(t),console.log("log_in")),ye.reset();const n=await u.db.auth().currentUser;console.log(n),qe.textContent=n.displayName})),Le.addEventListener("click",(function(){Se?(Le.textContent="Registration",he.classList.add("hiden"),Le.setAttribute("data-action","log_in"),ke.textContent="Log in",be.textContent="Don`t have account?",ge.removeAttribute("required"),ye.reset(),Se=!1):(Le.textContent="Log in",Le.setAttribute("data-action","reg"),he.classList.remove("hiden"),ke.textContent="Registration",be.textContent="Already have account?",ye.reset(),Se=!0)})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&Ce()})),fe.addEventListener("click",(function(e){e.target===fe&&Ce()}))}();
//# sourceMappingURL=index.506e38c8.js.map

{"mappings":"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","sources":["src/api/api.js","src/js/handleCart.js","src/js/themeSwitch.js","src/js/createMarkupFunctions/createCartMarkup.js","src/js/createMarkupFunctions/createMakeOrderMarkup.js","src/js/displayCart.js","src/js/createMarkupFunctions/createSneakersMarkupInCart.js","src/js/mobileMenu.js","src/js/handleAuthForm.js","src/js/favorites.js","src/js/createMarkupFunctions/createEmptyFavorites.js","src/js/createMarkupFunctions/createSneakersMarkup.js","src/js/handleFavorites.js"],"sourcesContent":["import axios from \"axios\"\n\nconst BASE_URL = \"https://sneakers-store-project.onrender.com\";\nexport const getSneakers = async () => {\n    // variant 1\n    // const { data } = await axios.get('/contcts')\n    // return data;\n\n    // variant 2\n    // const data = await fetch(`${BASE_URL}/contacts`)\n    // return await data.json();\n\n    // variant 3\n    const response = await fetch(`${BASE_URL}/sneakers`);\n    return response.json();\n};\n\nexport const findSneakers = async (query) => {\n    // return fetch(`${BASE_URL}/sneakers?title_like=${query}`).then(response => response.json());\n    const response = await fetch(`${BASE_URL}/sneakers?title_like=${query}`);\n    return response.json();\n }\n\n export const getSneakerById = async (id) => {\n    const response = await fetch(`${BASE_URL}/sneakers/${id}`);\n    return response.json();\n }\n","import { setActualPriceIntoHeader } from './calculateTotalPrice';\nimport { getSneakerById } from '../api/api';\nimport { db } from '../firebase';\nimport 'firebase/compat/firestore';\n\nexport async function handleCart(event) {\n  const cart = event.target;\n  console.log(cart);\n  if (cart.classList.contains('sneaker__add__button')) {\n    const sneakerId = cart.parentNode.parentNode.id;\n    const selectedSneaker = (await getSneakerById(sneakerId)) || {};\n    // const inCart = JSON.parse(localStorage.getItem('inCart')) || [];\n    //console.log(inCart);\n    if (cart.classList.contains('active')) {\n      // const updatedCart = inCart.filter(({ id }) => id !== sneakerId);\n      // console.log(updatedCart);\n      //localStorage.setItem('inCart', JSON.stringify(updatedCart));\n      cart.classList.remove('active');\n      console.log(cart);\n      // work with FIREBASE\n      const docId = await db.firestore().collection('cart').get();\n      docId.forEach(async item => {\n        const currentSneaker = item.data();\n        if (currentSneaker.id === selectedSneaker.id) {\n          await db.firestore().collection('cart').doc(item.id).delete();\n        }\n      });\n\n      setActualPriceIntoHeader();\n      return;\n    }\n    await db.auth().onAuthStateChanged(async user => {\n      if (user) {\n        cart.classList.add('active');\n        await db\n          .firestore()\n          .collection('cart')\n          .add({ ...selectedSneaker, userId: db.auth().currentUser.uid });\n\n        setActualPriceIntoHeader();\n      } else {\n        console.log('щоб додати у корзину - зареєструйся');\n      }\n    });\n    //inCart.push(selectedSneaker);\n    //localStorage.setItem('inCart', JSON.stringify(inCart));\n    // add sneakers to FIREBASE\n    await db\n      .firestore()\n      .collection('cart')\n      .add({ ...selectedSneaker, userId: db.auth().currentUser.uid });\n\n    setActualPriceIntoHeader();\n  }\n}\n\nexport function setInCartOnload() {\n  // const inCart = JSON.parse(localStorage.getItem('inCart')) || [];\n  db.firestore()\n    .collection('cart')\n    .where('userId', '==', db.auth().currentUser.uid)\n    .onSnapshot(\n      snapshot => {\n        const inCart = snapshot.docs.map(doc => doc.data()) || [];\n        document\n          .querySelectorAll('.sneaker__add__button.active')\n          .forEach(item => item.classList.remove('active'));\n\n        for (const { id } of inCart) {\n          const item = document.getElementById(id);\n\n          if (!item) {\n            continue;\n          }\n          // Якщо item === null (getElementById(id) не знайшов такого елементу на сторінці), то ми пропустимо ту ітерацію, і йти до наступної (continue пропускає ітерацію)\n          const cartButton = item.querySelector('.sneaker__add__button');\n          cartButton.classList.add('active');\n        }\n      },\n      error => {\n        console.log('Помилка отримання даних:', error);\n      },\n    );\n}\n","const switchElement = document.querySelector('.theme__switch');\n\nexport function themeSwitch() {\n  console.log(switchElement.checked);\n  if (switchElement.checked) {\n    document.body.classList.add('dark');\n    localStorage.setItem('theme', 'dark');\n  } else {\n    document.body.classList.remove('dark');\n    localStorage.setItem('theme', 'light');\n  }\n}\n\nexport function setThemeOnLoad() {\n  const currentTheme = localStorage.getItem('theme');\n  document.body.classList.add(currentTheme);\n\n  if (currentTheme === 'dark') {\n    switchElement.checked = true;\n  }\n}\n","import { handleDelete } from '../deleteItemInCart';\nimport createMakeOrderMarkup from './createMakeOrderMarkup';\n\nexport default function createCartMarkup() {\n  document.querySelector('.cartList').innerHTML = `\n  <div class=\"cartList__container\">\n    <div class=\"cart__container__top__blok\">\n    <h2 class=\"cartList__title\">Cart</h2>\n    <ul class=\"cartList__list\"></ul>\n</div>\n    <div class=\"cart__container__bottom__blok\">\n      <div class=\"sneaker__inCart__totalAmount\">\n        <p>Total</p>\n        <span></span>\n        <p>UAH</p>\n      </div>\n      <div class=\"sneaker__inCart__taxes\">\n        <p>VAT 5%</p>\n        <span></span>\n        <p>UAH</p>\n      </div>\n      <div class=\"cart__container__button__blok\">\n        <button class=\"cart__container__button\">Make order</button>\n      </div>\n    </div>\n  </div>`;\n  \n  const cartList = document.querySelector('.cartList__list');\n  const makeOrderButton = document.querySelector('.cart__container__button');\n\n  cartList.addEventListener('click', handleDelete);\n  makeOrderButton.addEventListener('click', createMakeOrderMarkup);\n}\n","export default function createMakeOrderMarkup() {\n\n  const inCartItems = localStorage.getItem('inCart');\n  let purchasesItems = localStorage.getItem('purchases');\n\n  if (!purchasesItems) {\n    purchasesItems = []; // Initialize as an empty array if purchasesItems is null or empty\n  } else {\n    purchasesItems = JSON.parse(purchasesItems); // Parse the stringified array\n  }\n\n  if (inCartItems) {\n    const combinedItems = purchasesItems.concat(JSON.parse(inCartItems));\n    localStorage.setItem('purchases', JSON.stringify(combinedItems));\n  }\n\n  localStorage.removeItem('inCart');\n  document.querySelector('.cartList__container').innerHTML = `\n    <div class=\"emptyContentOrder__wrapper\" >\n    <div class=\"emptyContentOrder__img\"></div>\n    <h3 class=\"emptyContentOrder__title\">Order is processed!</h3>\n    <p class=\"emptyContentOrder__text\">Your order will be delivered to courier soon</p>\n    <div class='emptyContentOrder__container__button'>\n    <a href=\"index.html\" class=\"emptyContentOrder__button\">Return</a>\n    </div>\n    </div>`;\n\n}\n","import createSneakersMarkupInCart from './createMarkupFunctions/createSneakersMarkupInCart';\nimport { setActualPriceIntoCart, setActualPriceIntoHeader } from './calculateTotalPrice';\nimport { setInCartOnload } from './handleCart';\nimport createCartMarkup from './createMarkupFunctions/createCartMarkup';\nimport createEmptyCart from './createMarkupFunctions/createEmptyCart';\nimport { db } from '../firebase';\nimport 'firebase/compat/firestore';\n\nlet list = null;\nconst backdrop = document.querySelector('#modal-backdrop');\nconst modalCart = document.querySelector('.cartList');\nlet unsubscribe = null;\n\ndocument.addEventListener('click', modalHandler);\n\nexport function modalHandler(evt) {\n  // const inCart = JSON.parse(localStorage.getItem('inCart')) || [];\n  const modalBtnOpen = evt.target.closest('.header__user__icon__cart');\n  \n  if (modalBtnOpen) {\n    createCartMarkup();\n\n    list = document.querySelector('.cartList__list');\n\n    // open btn click\n    showModal(modalCart);\n    setActualPriceIntoCart();\n\n    unsubscribe = db.firestore()\n    .collection('cart')\n    .where('userId', '==', db.auth().currentUser.uid)\n    .onSnapshot(snapshot => {\n      const inCart = snapshot.docs.map(doc => doc.data()) || [];\n      console.log(inCart);\n      if (inCart.length === 0) {\n        const cart = document.querySelector('.cartList__container');\n        cart.innerHTML = createEmptyCart();\n      } else {\n        list.innerHTML = createSneakersMarkupInCart(inCart);\n      }\n    }, error => {\n      console.log('Помилка отримання даних:', error);\n    });\n\n\n    // if (inCart.length === 0) {\n    //   const cart = document.querySelector('.cartList__container');\n    //   cart.innerHTML = createEmptyCart();\n    // } else {\n    //   list.innerHTML = createSneakersMarkupInCart(inCart);\n    // }\n  }\n\n  if (evt.target.matches('#modal-backdrop')) {\n    list.innerHTML = '';\n    hideModal(modalCart);\n    setActualPriceIntoHeader();\n    setInCartOnload();\n  }\n}\n\nexport function showModal(modalElem) {\n  modalElem.classList.add('active');\n  backdrop.classList.remove('hidden');\n  document.body.style.overflow = 'hidden';\n}\n\nexport function hideModal(modalElem) {\n  modalElem.classList.remove('active');\n  backdrop.classList.add('hidden');\n  document.body.style.overflow = 'visible';\n}\ndocument.addEventListener('keydown', function (event) {\n  if (event.key === 'Escape') {\n    hideModal(modalCart);\n  }\n});\n","export default function createSneakersMarkupInCart(items) {\n  const markup = items\n    .map(({ title, images, price, id }) => {\n      return `\n      <li class='sneaker__inCart__item'id=${id}>\n      <img class='sneaker__inCart__img' src=\"${images[0]}\" alt=\"${title}\">\n      <div class='sneaker__inCart__description'>\n          <h3>${title}</h3>\n          <p>${price} UAH</p>\n      </div>\n      <div class='sneaker__inCart__button'>\n          <span class='sneaker__inCart__button-span'>x</span>\n      </div>\n  </li>`;\n    })\n    .join(' ');\n  return markup;\n}\n","  const navToggle = document.querySelector(\"#navToggle\");\n  const navClosedIcon = document.querySelector(\"#navClosed\");\n  const navOpenIcon = document.querySelector(\"#navOpen\");\n  const navIcon = document.querySelectorAll(\".navIcon\");\n  const nav = document.querySelector(\"nav\");\n  \n\n  navToggle.addEventListener(\"click\", () => {\n    nav.classList.toggle(\"open\");\n\n    document.body.style.overflow = nav.classList.contains(\"open\") ? \"hidden\" : \"auto\";\n    navIcon.forEach((icon) => {\n      icon.classList.toggle(\"hidden\");\n    });\n  });\n  \n  \n  window.addEventListener(\n    \"resize\", () => {\n      if (document.body.clientWidth > 1200) {\n        nav.classList.remove(\"open\");\n        navIcon.forEach((icon) => {\n          icon.classList.remove(\"hidden\");\n        });\n        navOpenIcon.classList.add(\"hidden\");\n        document.body.style.overflow = \"auto\";\n\n      }\n    },\n    { passive: false }\n  );\n  ","import { createUser, signIn, db } from '../firebase';\n\nconst userButton = document.querySelector('.header__user__icon__user');\nconst authModal = document.querySelector('.modal-auth__backdrop');\nconst closeButton = document.querySelector('.close');\nconst authForm = document.querySelector('.auth__form');\nconst userNameForm = document.querySelector('.username__form');\nconst usernameInput = userNameForm.querySelector('input[name=\"name\"]');\nconst actionText = document.querySelector('.action__text');\nconst btnChangeForm = document.querySelector('.btn__change__form');\nconst title = document.querySelector('.form__title');\nlet isRegMode = true;\nconst identificateForm = document.querySelector('[data-action]');\nconst actionValue = identificateForm.dataset.action;\nconst userName = document.querySelector('.header__user__user__name');\n\nconsole.log(actionValue);\n\nexport async function handleSubmit(event) {\n  event.preventDefault();\n\n  const formData = [...authForm.elements].reduce((formData, element) => {\n    if (element.name) {\n      formData[element.name] = element.value;\n    }\n    return formData;\n  }, {});\n\n  if (isRegMode) {\n    await createUser(formData);\n    console.log('rege');\n    await signIn(formData);\n    \n  } else if (!isRegMode) {\n    await signIn(formData);\n    console.log('log_in');\n  }\n  authForm.reset();\n  const curentUser = await db.auth().currentUser;\n  console.log(curentUser);\n  userName.textContent = curentUser.displayName;\n}\n\nexport function openModal() {\n  console.log('openModal1');\n  authModal.classList.add('open');\n  closeButton.addEventListener('click', closeModal);\n  userButton.removeEventListener('click', openModal);\n  document.body.style.overflow = 'hidden';\n\n}\n\nexport function closeModal() {\n  authModal.classList.remove('open');\n  closeButton.removeEventListener('click', closeModal);\n  userButton.addEventListener('click', openModal);\n  document.body.style.overflow = 'visible';\n\n}\n\n\nfunction changeForm() {\nif(isRegMode){\n    btnChangeForm.textContent = 'Registration';\n    userNameForm.classList.add('hiden');\n    btnChangeForm.setAttribute('data-action', 'log_in');\n    title.textContent = 'Log in';\n    actionText.textContent = 'Don`t have account?';\n    usernameInput.removeAttribute('required');\n    authForm.reset();\n    isRegMode = false;\n} else {\n    btnChangeForm.textContent = 'Log in';\n    btnChangeForm.setAttribute('data-action', 'reg');\n    userNameForm.classList.remove('hiden');\n    title.textContent = 'Registration';\n    actionText.textContent = 'Already have account?';\n    authForm.reset();\n    isRegMode = true;\n}\n\n}\n\n// function changeForm() {\n//   if (isRegMode) {\n//     console.log('1');\n//     btnChangeForm.textContent = 'Log in';\n//     userNameForm.classList.add('hiden');\n//     btnChangeForm.setAttribute('data-action', 'log_in');\n//     title.textContent = 'Log in';\n//     actionText.textContent = 'Don`t have account?';\n//     usernameInput.removeAttribute('required');\n//     // authState();\n//     authForm.reset();\n//     isRegMode = true;\n//   } else {\n//     btnChangeForm.textContent = 'Registration';\n//     btnChangeForm.setAttribute('data-action', 'reg');\n//     userNameForm.classList.remove('hiden');\n//     title.textContent = 'Sign up';\n//     actionText.textContent = 'Already have account?';\n\n//     authForm.reset();\n//     isRegMode = false;\n//   }\n// }\n// function changeForm(){\n//     const action = btnChangeForm.dataset.action;\n//     if(action === 'log_in') {\n//         // 2 поля\n//         console.log('login');\n//         userNameForm.classList.add('hiden');\n//         btnChangeForm.setAttribute('data-action', 'reg');\n//         btnChangeForm.textContent = 'Registration';\n//         authForm.reset();\n//     } else if (action === 'reg') {\n//         console.log('reg');\n//         userNameForm.classList.remove('hiden');\n//         btnChangeForm.setAttribute('data-action', 'log_in');\n\n//         btnChangeForm.textContent = 'Log in';\n\n//         authForm.reset();\n\n// }\n// userNameForm.hide;\n// console.log(actionValue);\n// btnChangeForm.dataset.action = \"reg\";\n\n// }\n\nuserButton.addEventListener('click', openModal);\nauthForm.addEventListener('submit', handleSubmit);\nbtnChangeForm.addEventListener('click', changeForm);\ndocument.addEventListener('keydown', function(event) {\n    if (event.key === 'Escape') {\n      closeModal();\n    }\n  });\n  authModal.addEventListener('click', function(event) {\n    if (event.target === authModal) {\n      closeModal();\n    }\n  });","import createSneakersMarkup from './createMarkupFunctions/createSneakersMarkup';\nimport { setFavoritesOnload } from './handleFavorites';\nimport { createEmptyFavorites } from './createMarkupFunctions/createEmptyFavorites';\nimport { setActualPriceIntoHeader } from './calculateTotalPrice';\nimport { setInCartOnload } from './handleCart';\nimport {getSneakerById} from '../api/api';\n\nimport { setActualPriceIntoHeader } from './calculateTotalPrice';\nimport { setInCartOnload } from './handleCart';\nimport { themeSwitch, setThemeOnLoad } from './themeSwitch';\nimport { modalHandler } from './displayCart';\nimport './mobileMenu';\nimport { openModal } from './handleAuthForm';\n\nsetThemeOnLoad();\n\ndocument.querySelector('.theme__switch').addEventListener('change', themeSwitch);\ndocument.addEventListener('click', modalHandler);\n\nconst userButton = document.querySelector('.header__user__icon__user');\nuserButton.addEventListener('click', openModal);\n\n\nconst list = document.querySelector('.favoritesList__list');\nlist.addEventListener('click', handleFavorites);\nlist.addEventListener('click', handleCart);\n\nconst favorites = JSON.parse(localStorage.getItem('favorites')) || [];\n\nif (favorites.length === 0) {\n  emptyFavorites();\n\n} else {\n  list.insertAdjacentHTML('afterbegin', createSneakersMarkup(favorites));\n  setFavoritesOnload();\n  setInCartOnload();\n}\n\nsetActualPriceIntoHeader();\n\nfunction emptyFavorites() {\n  const favoritesList = document.querySelector('.favoritesList__list');\n  favoritesList.innerHTML = createEmptyFavorites();\n}\n\nfunction handleFavorites(event) {\n  const heart = event.target;\n\n  if (heart.classList.contains('sneaker__heart__button')) {\n    const sneaker = heart.closest('li');\n    const favorites = JSON.parse(localStorage.getItem('favorites')) || [];\n\n    if (heart.classList.contains('active')) {\n      const updatedFavorites = favorites.filter(({ id }) => id !== sneaker.id);\n      localStorage.setItem('favorites', JSON.stringify(updatedFavorites));\n      heart.classList.remove('active');\n      sneaker.remove();\n    }\n  }\n  const favorites = JSON.parse(localStorage.getItem('favorites')) || [];\n\n  if(favorites.length === 0) {\n    emptyFavorites();\n  }\n}\n\nasync function handleCart(event) {\n  const cart = event.target;\n\n  if (cart.classList.contains('sneaker__add__button')) {\n    const sneakerId = cart.parentNode.parentNode.id;\n    const selectedSneaker = await getSneakerById(sneakerId) || {};\n    const inCart = JSON.parse(localStorage.getItem('inCart')) || [];\n\n    if (cart.classList.contains('active')) {\n      const updatedCart = inCart.filter(({ id }) => id !== sneakerId);\n      localStorage.setItem('inCart', JSON.stringify(updatedCart));\n      cart.classList.remove('active');\n      setActualPriceIntoHeader();\n      return;\n    }\n    cart.classList.add('active');\n    inCart.push(selectedSneaker);\n    localStorage.setItem('inCart', JSON.stringify(inCart));\n    setActualPriceIntoHeader();\n  }\n}\n\n\n","export function createEmptyFavorites () {\n    return `<div class=\"emptyContentFavorites__wrapper\" >\n    <div class=\"emptyContentFavorites__img\">🥺</div>\n    <h3 class=\"emptyContentFavorites__title\">Favorites not found</h3>\n    <p class=\"emptyContentFavorites__text\">You have not added anything to favorites</p>\n    <div class='emptyContentFavorites__container__button'>\n    <a href=\"index.html\" class=\"emptyContentFavorites__button\">Return</a>\n    </div>\n    </div>`\n}\n","export default function createSneakersMarkup(items) {\n  const markup = items\n    .map(({ title, images, price, id }) => {\n      const formatedTitle = title.slice(0, 23) + '...';\n      return `<li class='sneaker__item' id = \"${id}\">\n    <div class='sneaker__img__wrapper'>\n    <div class='sneaker__heart__button'>\n</div>\n    <img src=\"${images[0]}\" alt=\"${title}\">\n</div>\n<h4 class='sneaker__title'>${formatedTitle}</h4>\n<div class='sneaker__price__container'>\n    <div class='sneaker__price__wrapper'>\n        <p class='sneaker__price__label'>Price</p>\n        <p class='sneaker__price'>${price}</p>\n    </div>\n    <div class='sneaker__add__button'>\n        <span class='sneaker__plus__span'></span>\n    </div>\n</div>\n</li>`;\n    })\n    .join(' ');\n  return markup;\n}\n","import { getSneakerById } from '../api/api';\nimport { db } from '../firebase';\nimport 'firebase/compat/firestore';\n\nexport async function handleFavorites(event) {\n  const heart = event.target;\n\n  if (heart.classList.contains('sneaker__heart__button')) {\n    const sneaker = heart.closest('li');\n    const selectedSneaker = (await getSneakerById(sneaker.id)) || {};\n    const favorites = JSON.parse(localStorage.getItem('favorites')) || [];\n\n    if (heart.classList.contains('active')) {\n      const updatedFavorites = favorites.filter(({ id }) => id !== sneaker.id);\n      localStorage.setItem('favorites', JSON.stringify(updatedFavorites));\n      heart.classList.remove('active');\n\n      // work with FIREBASE\n      const docId = await db.firestore().collection('favorites').get();\n      docId.forEach(async item => {\n        const currentSneaker = item.data();\n        if (currentSneaker.id === selectedSneaker.id) {\n          await db.firestore().collection('favorites').doc(item.id).delete();\n        }\n      });\n\n      return;\n    }\n    heart.classList.add('active');\n    favorites.push(selectedSneaker);\n    localStorage.setItem('favorites', JSON.stringify(favorites));\n    // add sneakers to FIREBASE\n     await db.firestore().collection(\"favorites\").add({...selectedSneaker, userId: db.auth().currentUser.uid});\n  }\n}\n\nexport function setFavoritesOnload() {\n  const favorites = JSON.parse(localStorage.getItem('favorites')) || [];\n\n  for (const { id } of favorites) {\n    const item = document.getElementById(id);\n    if (!item) {\n      continue;\n    }\n\n    const heartButton = item.querySelector('.sneaker__heart__button');\n\n    heartButton.classList.add('active');\n  }\n}\n"],"names":["$c252e6b9c2d40ab9$var$BASE_URL","$c252e6b9c2d40ab9$export$a99e8a841c7e62c1","async","id","fetch","json","$gTT0W","parcelRequire","$3c3e4ff0d3a449ba$export$f43df08f77b54999","$cEKo3","db","firestore","collection","where","auth","currentUser","uid","onSnapshot","snapshot","inCart","docs","map","doc","data","document","querySelectorAll","forEach","item","classList","remove","getElementById","querySelector","add","error","console","log","$835edf57c3be19f6$var$switchElement","$aROVc","$e5bdbf7e43311375$export$2e2bcd8739ae039","inCartItems","localStorage","getItem","purchasesItems","JSON","parse","combinedItems","concat","setItem","stringify","removeItem","innerHTML","$3429ac0e41866916$export$2e2bcd8739ae039","cartList","makeOrderButton","addEventListener","handleDelete","$7e213f0fa6007110$var$list","$7e213f0fa6007110$var$backdrop","$7e213f0fa6007110$var$modalCart","$7e213f0fa6007110$var$unsubscribe","$7e213f0fa6007110$export$ea6ae64fa989b7ac","evt","target","closest","body","style","overflow","setActualPriceIntoCart","length","$sLsIj","default","title","images","price","join","matches","$7e213f0fa6007110$export$af4939467128bcd0","setActualPriceIntoHeader","modalElem","event","key","$be0d25192bfa2630$var$navToggle","$be0d25192bfa2630$var$navOpenIcon","$be0d25192bfa2630$var$navIcon","$be0d25192bfa2630$var$nav","toggle","contains","icon","window","clientWidth","passive","$10e42879bff25843$var$userButton","$10e42879bff25843$var$authModal","$10e42879bff25843$var$closeButton","$10e42879bff25843$var$authForm","$10e42879bff25843$var$userNameForm","$10e42879bff25843$var$usernameInput","$10e42879bff25843$var$actionText","$10e42879bff25843$var$btnChangeForm","$10e42879bff25843$var$title","$10e42879bff25843$var$isRegMode","$10e42879bff25843$var$actionValue","dataset","action","$10e42879bff25843$var$userName","$10e42879bff25843$export$a7f6cffb6b8ba11c","$10e42879bff25843$export$3f6fecd573f3fa48","removeEventListener","preventDefault","formData","elements","reduce","element","name","value","createUser","signIn","reset","curentUser","textContent","displayName","setAttribute","removeAttribute","currentTheme","checked","$6befdf793f7dd1b0$var$list","heart","sneaker","favorites","updatedFavorites","filter","$6befdf793f7dd1b0$var$emptyFavorites","cart","sneakerId","parentNode","selectedSneaker","updatedCart","push","$6befdf793f7dd1b0$var$favorites","insertAdjacentHTML","formatedTitle","slice"],"version":3,"file":"favorites.57e7514e.js.map"}